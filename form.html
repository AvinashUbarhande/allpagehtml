<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Preferences Form</title>
    <style>
        /* Global Styles */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 20px;
        }

        .form-container {
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            max-width: 500px;
            margin: auto;
            padding: 30px;
            box-sizing: border-box;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        /* Form Field Styles */
        label {
            display: block;
            margin: 10px 0 5px;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: 95%;
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        select {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        /* Button Styles */
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            width: 100%;
            cursor: pointer;
        }

        button:hover {
            background-color: #218838;
        }

        /* Error and Success Message Styles */
        .error {
            color: red;
            font-size: 12px;
            display: none;
        }

        .success {
            color: green;
            font-size: 14px;
            display: none;
        }

        /* Spinner Styles */
        .spinner {
            display: none;
            text-align: center;
            padding: 10px;
        }
    </style>
</head>

<body>

    <div class="form-container">
        <h2>Submit Your Tech Preferences</h2>
        <form id="techForm">
            <!-- Name Field -->
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your name">
            <div id="nameError" class="error">Please enter your name.</div>

            <!-- Email Field -->
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" placeholder="Enter your email">
            <div id="emailError" class="error">Please enter a valid email address.</div>

            <!-- Mobile Number Field -->
            <label for="mobile">Mobile Number</label>
            <input type="tel" id="mobile" name="mobile" placeholder="Enter your mobile number">
            <div id="mobileError" class="error">Please enter a valid mobile number (at least 10 digits).</div>

            <!-- Country Field -->
            <label for="country">Country</label>
            <select id="country" name="country">
                <option value="">Select Country</option>
                <option value="IN">India</option>
            </select>
            <div id="countryError" class="error">Please select your country.</div>

            <!-- Tech Preferences -->
            <label for="tech">Favorite Tech</label>
            <select id="tech" name="tech">
                <option value="">Select tech</option>
                <option value="ai">Artificial Intelligence</option>
                <option value="wearables">Wearables</option>
                <option value="smartphones">Smartphones</option>
                <option value="cloud">Cloud Computing</option>
            </select>
            <div id="techError" class="error">Please select your favorite tech.</div>


            <!-- OTP Field -->
            <label for="otp">OTP (for validation)</label>
            <input type="text" id="otp" name="otp" placeholder="Enter OTP">
            <div id="otpError" class="error">Please enter a 6-digit OTP.</div>
            <br /><br />
            <button type="button" id="submitBtn">Submit</button>

            <!-- Success Message -->
            <div id="successMessage" class="success">Form submitted successfully!</div>
            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="spinner">Submitting your details...</div>
        </form>
    </div>

    <script>
        function countBy(items, groupName) {
            let counts = [];
            for (let item of items) {
                let name = groupName(item);
                let known = counts.find(c => c.name == name);
                if (!known) {
                    counts.push({ name, count: 1 });
                } else {
                    known.count++;
                }
            }
            return counts;
        }

        console.log(countBy([1, 2, 3, 4, 5], n => n > 2));



        // Validate each form field in real-time on keypress or input
        const validateField = (fieldId) => {
            let isValid = true;
            const value = document.getElementById(fieldId).value;
            const errorMessage = document.getElementById(`${fieldId}Error`);

            if (fieldId === "name") {
                if (!value) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            if (fieldId === "email") {
                const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
                if (!emailPattern.test(value)) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            if (fieldId === "mobile") {
                if (value.length < 10) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            if (fieldId === "country") {
                if (!value) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            if (fieldId === "otp") {
                if (value.length !== 6 || isNaN(value)) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            if (fieldId === "tech") {
                if (!value) {
                    errorMessage.style.display = 'block';
                    isValid = false;
                } else {
                    errorMessage.style.display = 'none';
                }
            }

            return isValid;
        };

        // Set up event listeners for real-time validation
        document.getElementById('name').addEventListener('input', () => validateField('name'));
        document.getElementById('email').addEventListener('input', () => validateField('email'));
        document.getElementById('mobile').addEventListener('input', () => validateField('mobile'));
        document.getElementById('country').addEventListener('change', () => validateField('country'));
        document.getElementById('otp').addEventListener('input', () => validateField('otp'));
        document.getElementById('tech').addEventListener('change', () => validateField('tech'));  // Add this line for "Tech Preferences" validation


        // Handle form submission
        document.getElementById('submitBtn').addEventListener('click', () => {
            let isValid = true;

            // Validate each field before submission
            const fields = ['name', 'email', 'mobile', 'country', 'otp', 'tech'];
            fields.forEach((fieldId) => {
                if (!validateField(fieldId)) {
                    isValid = false;
                }
            });

            if (isValid) {
                // Show loading spinner
                document.getElementById('loadingSpinner').style.display = 'block';

                // Simulate form submission (Here you could use fetch to submit data to a server)
                setTimeout(() => {
                    document.getElementById('loadingSpinner').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    document.getElementById('techForm').reset(); // Reset the form
                }, 2000);
            }
        });

        // Load country data when the page loads
        window.onload = loadCountries;
    </script>

</body>

</html>