<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Video Meeting</title>
    <!-- Bootstrap 5 CSS Link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        /* Custom Styles */
        #videoContainer { display: none; margin-top: 20px; }
        video { width: 100%; max-width: 600px; }
        .btn-custom { padding: 10px 20px; margin: 5px; }
        .audioOff, .videoOff { background-color: #dc3545; }
    </style>
</head>

<body>
    <div class="container text-center mt-5">
        <h1>Video Meeting</h1>
        <button id="startMeetingButton" class="btn btn-success btn-custom">Start Meeting</button>
        <div id="videoContainer">
            <video id="localVideo" autoplay muted></video>
            <div>
                <button id="toggleAudio" class="btn btn-primary btn-custom">Mute Audio</button>
                <button id="toggleVideo" class="btn btn-info btn-custom">Turn Off Video</button>
            </div>
        </div>
        <div id="meetingStatus" class="mt-3"></div>
    </div>

    <!-- Bootstrap 5 JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        // Get elements
        const startMeetingButton = document.getElementById('startMeetingButton');
        const videoContainer = document.getElementById('videoContainer');
        const toggleAudio = document.getElementById('toggleAudio');
        const toggleVideo = document.getElementById('toggleVideo');
        const localVideo = document.getElementById('localVideo');
        const meetingStatus = document.getElementById('meetingStatus');
        
        let audioStreamEnabled = true, videoStreamEnabled = true;

        // Start meeting
        startMeetingButton.addEventListener('click', async () => {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                localVideo.srcObject = stream;
                videoContainer.style.display = 'block';
                meetingStatus.textContent = 'Meeting Started';
                startMeetingButton.textContent = 'End Meeting';
                startMeetingButton.classList.replace('btn-success', 'btn-danger');
            } catch (err) {
                console.error('Error accessing media devices:', err);
                meetingStatus.textContent = 'Failed to start meeting';
            }
        });

        // Toggle audio
        toggleAudio.addEventListener('click', () => {
            const audioTrack = localVideo.srcObject.getAudioTracks()[0];
            audioStreamEnabled = !audioStreamEnabled;
            audioTrack.enabled = audioStreamEnabled;
            toggleAudio.textContent = audioStreamEnabled ? 'Mute Audio' : 'Unmute Audio';
            toggleAudio.classList.toggle('audioOff', !audioStreamEnabled);
        });

        // Toggle video
        toggleVideo.addEventListener('click', () => {
            const videoTrack = localVideo.srcObject.getVideoTracks()[0];
            videoStreamEnabled = !videoStreamEnabled;
            videoTrack.enabled = videoStreamEnabled;
            toggleVideo.textContent = videoStreamEnabled ? 'Turn Off Video' : 'Turn On Video';
            toggleVideo.classList.toggle('videoOff', !videoStreamEnabled);
        });

        // End meeting (optional)
        startMeetingButton.addEventListener('click', () => {
            if (startMeetingButton.textContent === 'End Meeting') {
                localVideo.srcObject.getTracks().forEach(track => track.stop());
                meetingStatus.textContent = 'Meeting Ended';
                videoContainer.style.display = 'none';
                startMeetingButton.textContent = 'Start Meeting';
                startMeetingButton.classList.replace('btn-danger', 'btn-success');
            }
        });
    </script>
</body>

</html>
